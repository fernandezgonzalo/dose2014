<div ng-include="'partials/header.html'"></div>
<div ng-include="'partials/pestanas.html'"></div>    
<article ng-init="init()">    
   <div > 
        <div class="container">
            <div class="row">
                  <div class="col-md-10 col-md-offset-1">
                    <h3>Iteration: {{iteration.title_iteration}} - Work Items</h3>
                  </div>                 
                  <div class="col-md-10 col-lg-offset-10">
                    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal8">+</button>
                  </div>
            </div>     
        </div>

            <div class="row">
              <div class="col-md-10 col-md-offset-1">
                <table class="table">
                  <tr>
                    <th>Id</th>
                    <th>Title</th>
                    <th>Points</th>
                  </tr>
                  <tr ng-repeat="workItem in workItems" >
                    <td>{{workItem.number}}</td>
                    <td>{{workItem.name}}</td>
                    <td>{{workItem.points}}</td>
                  </tr>
                </table>
              </div>
              </div>
        </div> <!-- end of container --> 
    </div>

<!--Modal add Work Item -->
<div class="modal bs-example-modal-lg" id="exampleModal8" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                        <h4 class="modal-title" id="exampleModalLabel">Add Work Item</h4>  
            </div>
            
              <div class="modal-body">
            <form class="form-signin" ng-submit="create_work_item()" role="form" id="1181323992">
                          <div class="row">
                              <div class="col-lg-2">
                                  <span>Title:</span>
                              </div>
                              <div class="col-lg-4">    
                                  <input type="text" class="form-control" id="recipient-name"  placeholder="Title of Work Item"  required autofocus="">
                              </div>
  
                              <div class="col-lg-2">
                                  <span>Status:</span>
                              </div>  
                              <div class="col-lg-4">
                                  <select class="form-control" ng-model="newWorkItem.new_status" ng-options="status for status in statusWorkItems.values"></select>
                              </div>

                          </div> <!--end div row title and status-->
                          <br>
                          <div class="row">
                              <div class="col-lg-2">
                                  <span>Points:</span>
                              </div>
                              <div class="col-lg-4">    
                                  <input type="text" class="form-control" id="recipient-name" required autofocus="">
                              </div>
  
                              
                              <div class="col-lg-2">
                                  <span>Owned By:</span>
                              </div>  
                              <div class="col-lg-4">
                                  <input type="ownerWorkItem" id="owner" class="form-control" ng-model="project.owner" ng-readonly="project.owner">
                              </div>
                              
                          </div>  <!--end div row points and owned by-->
                          <br>
                          <div class="row">
                              <div class="col-lg-2">
                                  <span>Description:</span>
                              </div>    
                              <div class="col-lg-4">
                                     <input type="text" class="form-control" id="recipient-name" required autofocus="">
                              </div>    
                                
                              <div class="col-lg-2">
                                  <span>Iteration:</span>
                              </div>  
                              <div class="col-lg-4">
                                  <input type="iteration" id="iter" class="form-control" ng-model="iteration.title_iteration" ng-readonly="iteration.title_iteration">
                              </div>
                              
                          </div>
                          <br>
                          <div class="row">
                            <div class="col-lg-6">
                                <span>Comment:</span>
                                <div class="row">
                                  <div class="col-lg-10">
                                    <input type="text" ng-model="comentario" class="form-control" id="recipient-name">
                                  </div>  
                                  <div class="col-lg-2">
                                    <button type="button" class="btn btn-sm btn-primary btn-block" ng-click="add_comment(comentario);"><i class="fa fa-plus-circle"></i></button>
                                  </div>        
                                  <br>
                                  <div class="col-lg-12" style="overflow-y:scroll;">
                                    <table class="table-comments" style="height:200px;">
                                      <tr>
                                        <th width="300">Date</th>
                                        <th width="300">Author</th>
                                        <th width="300">Content</th>
                                      </tr>
                                      <tr ng-repeat="comment in comments" >
                                        <td>{{comment.date}}</td>
                                        <td>{{comment.author}}</td>
                                        <td>{{comment.content}}</td>
                                      </tr>
                                    </table>
                                  </div>
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <span>Links:</span>
                                <div class="row">
                                  <div class="col-lg-10">
                                    <input type="text" class="form-control" id="recipient-name">
                                  </div>  
                                  <div class="col-lg-2">
                                    <button type="button" class="btn btn-sm btn-primary btn-block" ng-click="add_links(newUser);"><i class="fa fa-plus-circle"></i></button>
                                  </div>        
                                  <br>
                                  <div class="col-lg-12" style="overflow-y:scroll;">
                                    <table class="table-links" style="height:200px;">
                                      <tr>
                                        <th>Links</th>
                                      </tr>
                                      <tr ng-repeat="work_item in work_items" >
                                        <td ng-click="goToWorkItem(work_item)">{{work_item.work_item_title}}</td>
                                      </tr>
                                    </table>
                                  </div>
                                </div>
                            </div>
                          </div>

                    <div class="modal-footer">
                            <button type="submit" class="btn btn-primary" ng-click="create_work_item(project.project_name_id, iteration.iteration_number)" data-dismiss="modal">Done</button>
                            <button type="button" class="btn btn-danger" data-dismiss="modal">X</button>  
                    </div>
                </div>
            </form>
        </div>
    </div>

<!--Modal Modify Information of Work-->
    <div class="modal fade" id="exampleModal8" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title" id="exampleModalLabel">Work Item Information(Under Construction)</h4>  
                </div>
                <div class="modal-body">
                  <div class="row">
                            <div class="col-lg-1">
                                <span class="input">Title</span>
                            </div>
                            <div class="col-lg-6">
                                <input type="text" class="form-control" placeholder="Work Item Example" required="" autofocus="">
                            </div>
                  </div>  
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal4">Done</button>
                   <button type="button" class="btn btn-danger" data-dismiss="modal" data-target="#exampleModal5" >X</button>                    
                </div>
            </div>
        </div>
    </div>

</article>    
<div ng-include="'partials/footer.html'"></div>